import{u as z}from"./index-DqOc7EMi.js";import{d as I,r as d,y as N,w as P,q as T,z as B,a as t,A as o,B as h,C as i,E as C,F as A,G as f,H as E,T as U,N as u,M as Z,R as $,S as q}from"./index-5PpaRQ4V.js";import{C as M}from"./index-BRg6Nkow.js";import{I as V,_ as W,a as G,b as H}from"./index-DFQ6e8eg.js";import{B as L}from"./index-Bj9HVelq.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useState-Cj3IvW2q.js";import"./useFlexGapSupport-DreIYkeg.js";const w=c=>($("data-v-4ba87d12"),c=c(),q(),c),J=w(()=>f("div",{class:"text-center font-semibold text-xl"}," 注册 ",-1)),K=w(()=>f("a",{class:"text-blue-500",href:"#"},"已账号？去登录",-1)),O=I({__name:"Register",setup(c){const{width:_}=z();let s=d({width:"450px",height:"360px",borderRadius:"10px",image:"/image/login.jpg",marginTop:"250px"});const p=d(!1),b=d(),r=N({username:"",email:"",password:""}),x={username:[{required:!0,validator:async(a,e)=>{if(e){if(e.length<3||e.length>10)return Promise.reject("用户名长度在3到10之间")}else return Promise.reject("用户名不能为空！")},trigger:"change"}],email:[{validator:async(a,e)=>{if(e){if(!/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e))return Promise.reject("邮箱格式不正确")}else return Promise.reject("邮箱不能为空！")},trigger:"change"}],password:[{validator:async(a,e)=>{if(e.length<6||e.length>16)return Promise.reject("密码长度不能小于6位")},trigger:"change"}]},v=async a=>{console.log("Success:",a),p.value=!0;let e={userName:a.username,email:a.email,password:a.password};const n=await U(e);n.code===200?(u.success("注册成功！"),p.value=!1,Z.push("/login")):(p.value=!1,u.success(n.msg))},y=()=>{u.error("请完成表单验证！")},g=a=>{a?a<768&&(s.value={width:"300px",height:"460px",borderRadius:"10px",image:"/image/login1.jpg",marginTop:"100px"}):s.value={width:"450px",height:"360px",borderRadius:"10px",image:"/image/login.jpg",marginTop:"250px"}};return P(_,a=>{g(a)}),T(async()=>{g(_.value)}),(a,e)=>{const n=V,m=W,k=G,j=L,R=H,S=C("router-link"),F=M;return A(),B("div",{style:h({backgroundImage:`url(${i(s).image})`}),class:"flex justify-center h-screen login-background"},[t(F,{style:h({width:i(s).width,height:i(s).height,borderRadius:i(s).borderRadius,marginTop:i(s).marginTop}),class:"justify-center bg-slate-100",hoverable:""},{title:o(()=>[J]),default:o(()=>[f("div",null,[t(R,{ref_key:"formRef",ref:b,"label-col":{span:4},model:r,rules:x,autocomplete:"off",class:"justify-center items-center",name:"custom-validation",onFinish:v,onFinishFailed:y},{default:o(()=>[t(m,{"wrapper-col":{offset:0,span:19},"has-feedback":"",label:"用户名：",name:"username"},{default:o(()=>[t(n,{value:r.username,"onUpdate:value":e[0]||(e[0]=l=>r.username=l),autocomplete:"off",placeholder:"请输入用户名"},null,8,["value"])]),_:1}),t(m,{"wrapper-col":{offset:0,span:19},"has-feedback":"",label:"邮箱：",name:"email"},{default:o(()=>[t(n,{value:r.email,"onUpdate:value":e[1]||(e[1]=l=>r.email=l),autocomplete:"off",placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(m,{"wrapper-col":{offset:0,span:19},"has-feedback":"",label:"密码：",name:"password"},{default:o(()=>[t(k,{value:r.password,"onUpdate:value":e[2]||(e[2]=l=>r.password=l),autocomplete:"off",placeholder:"请输入密码"},null,8,["value"])]),_:1}),t(m,null,{default:o(()=>[t(j,{loading:p.value,class:"w-full","html-type":"submit",size:"large",type:"primary"},{default:o(()=>[E(" 注册账号 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),t(S,{to:"/login"},{default:o(()=>[K]),_:1})]),_:1},8,["style"])],4)}}}),ie=D(O,[["__scopeId","data-v-4ba87d12"]]);export{ie as default};
