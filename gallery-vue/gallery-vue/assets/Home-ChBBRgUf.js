import{I as x}from"./iconify-DiTP47LM.js";import{u as S}from"./index-DqOc7EMi.js";import{a as T,M as F,S as C,g as z,U as W,b as B}from"./gallert-DvVcS6G-.js";import{aS as L,d as D,y as A,r as u,F as m,z as r,a,A as n,H as G,q as V,as as j,G as s,C as v,N as M,X as $,av as q,at as K,ax as I,au as E}from"./index-5PpaRQ4V.js";import{B as H}from"./index-Bj9HVelq.js";import{I as O,_ as P,f as R,b as X}from"./index-DFQ6e8eg.js";import{C as J}from"./index-BRg6Nkow.js";import"./useState-Cj3IvW2q.js";import"./LeftOutlined-QmrvFNcE.js";import"./RightOutlined-BZ_LZo5C.js";import"./useFlexGapSupport-DreIYkeg.js";import"./useDestroyed-CucJjMc7.js";const Q="06c00e7dc34f4c3f95308459bc87db14",Y=(w,h)=>{let e=new FormData,p="100",d="100";return e.append("file",w),e.append("imgKey",Q),e.append("imgWidth",p),e.append("imgHeight",d),e.append("imgFormat",""),e.append("imgName",""),e.append("imgDesc",""),L.post("/api/file/upload",e,{headers:{"Content-Type":"multipart/form-data"}})},Z=D({__name:"GalleryInfoComponent",setup(w,{expose:h}){const e=A({createTime:"",id:0,imgDesc:"",imgFormat:"",imgHash:"",imgHeight:0,imgName:"",imgSize:0,imgType:"",imgUrl:"",imgWidth:0,updateTime:"",userid:0}),p=u(!1),d=u(!1);return h({showGalleryInfo:async f=>{d.value=!0;const t=await T(f);t.code==200&&(Object.assign(e,t.data),p.value=!0,setTimeout(()=>{d.value=!1},200))}}),(f,t)=>{const y=H,i=O,o=P,c=R,U=X,b=F,k=C;return m(),r("div",null,[a(k,{spinning:d.value,tip:"加载中"},{default:n(()=>[a(b,{open:p.value,"onUpdate:open":t[10]||(t[10]=l=>p.value=l),title:"图信息"},{footer:n(()=>[a(y,{key:"back",danger:"",type:"primary",onClick:t[0]||(t[0]=l=>p.value=!1)},{default:n(()=>[G("关闭")]),_:1})]),default:n(()=>[a(U,{"label-col":{span:5},"wrapper-col":{span:18}},{default:n(()=>[a(o,{label:"图片名字",name:"imgName"},{default:n(()=>[a(i,{value:e.imgName,"onUpdate:value":t[1]||(t[1]=l=>e.imgName=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片大小",name:"imgSize",r:""},{default:n(()=>[a(i,{value:e.imgSize,"onUpdate:value":t[2]||(t[2]=l=>e.imgSize=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片宽度",name:"imgWidth"},{default:n(()=>[a(i,{value:e.imgWidth,"onUpdate:value":t[3]||(t[3]=l=>e.imgWidth=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片高度",name:"imgHeight"},{default:n(()=>[a(i,{value:e.imgHeight,"onUpdate:value":t[4]||(t[4]=l=>e.imgHeight=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片格式",name:"imgFormat"},{default:n(()=>[a(i,{value:e.imgFormat,"onUpdate:value":t[5]||(t[5]=l=>e.imgFormat=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片hash",name:"imgHash"},{default:n(()=>[a(i,{value:e.imgHash,"onUpdate:value":t[6]||(t[6]=l=>e.imgHash=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片地址",name:"imgUrl"},{default:n(()=>[a(i,{value:e.imgUrl,"onUpdate:value":t[7]||(t[7]=l=>e.imgUrl=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"创建时间",name:"imgUrl"},{default:n(()=>[a(i,{value:e.createTime,"onUpdate:value":t[8]||(t[8]=l=>e.createTime=l),disabled:""},null,8,["value"])]),_:1}),a(o,{label:"图片描述",name:"imgDesc"},{default:n(()=>[a(c,{value:e.imgDesc,"onUpdate:value":t[9]||(t[9]=l=>e.imgDesc=l),disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["spinning"])])}}}),ee={key:0},ae=s("p",{class:"ant-upload-text"},"上传中....",-1),te=s("p",{class:"ant-upload-hint"},"支持单次上传。严禁上传公司数据或其他乐队文件 ",-1),le={key:1},ne={class:"ant-upload-drag-icon"},oe=s("p",{class:"ant-upload-text"},"单击或拖动文件到此区域进行上传",-1),se=s("p",{class:"ant-upload-hint"},"支持单次上传。严禁上传公司数据或其他乐队文件 ",-1),ie={class:"flex mt-2 justify-center items-center"},de=s("span",{class:"text-lg font-semibold ml-2"}," 最近上传 ",-1),me={key:0},pe=s("p",null,"暂未有上传",-1),re={key:1},ue={class:"flex justify-center items-center",style:{"border-top":"1px  #666"}},ce={class:"flex-none p-2"},ge={class:"grow p-2"},_e=["href"],fe={key:0},ve={class:"flex-none p-2"},Se=D({__name:"Home",setup(w){const{width:h}=S(),e=u(!0),p=u(10),d=u([]),_=u(!1),f=u(),t=async o=>{_.value=!0,(await Y(o.file)).code==200&&(await y(1),setTimeout(()=>{_.value=!1},300),M.success("上传成功"))},y=async o=>{e.value=!0;const c=await z(o,p.value);c.code===200&&(d.value=c.data.rows,setTimeout(()=>{e.value=!1},200))},i=o=>{f.value.showGalleryInfo(o)};return V(()=>{j()&&y(1)}),(o,c)=>{const U=W,b=J,k=B,l=H,N=C;return m(),r("div",null,[s("div",null,[a(U,{customRequest:t,disabled:_.value,multiple:!1,"show-upload-list":!1,accept:"image/*","list-type":"picture-card",name:"file"},{default:n(()=>[_.value?(m(),r("div",ee,[a(v(x),{icon:"eos-icons:loading",style:{height:"50px",width:"50px"}}),ae,te])):(m(),r("div",le,[s("p",ne,[a(v(x),{icon:"pixelarticons:cloud-upload",style:{height:"50px",width:"50px"}})]),oe,se]))]),_:1},8,["disabled"])]),s("div",ie,[a(v(x),{icon:"oui:app-recently-viewed"}),de]),d.value.length==0?(m(),r("div",me,[a(b,{class:"text-center font-semibold"},{default:n(()=>[a(v(x),{icon:"carbon:data-error",style:{height:"40px",width:"40px"}}),pe]),_:1})])):(m(),r("div",re,[a(N,{spinning:e.value,tip:"加载中"},{default:n(()=>[(m(!0),r($,null,q(d.value,g=>(m(),K(b,{class:"hover:bg-zinc-200"},{default:n(()=>[s("div",ue,[s("div",ce,[a(k,{height:60,src:g.imgUrl,width:60},null,8,["src"])]),s("div",ge,[s("a",{href:g.imgUrl},I(g.imgName),9,_e),v(h)>=768?(m(),r("div",fe,[s("span",null,I(g.imgDesc==""?"暂无描述":g.imgDesc),1)])):E("",!0)]),s("div",ve,[a(l,{type:"primary",onClick:he=>i(g.id)},{default:n(()=>[G("查看")]),_:2},1032,["onClick"])])])]),_:2},1024))),256))]),_:1},8,["spinning"])])),a(Z,{ref_key:"galleryInfoComponent",ref:f},null,512)])}}});export{Se as default};
